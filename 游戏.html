<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ·±å¤œé…’å±€å¤§è½¬ç›˜</title>
    <style>
        body {
            background-color: #1a1a2e; /* æ·±å¤œè“èƒŒæ™¯ */
            color: #fff;
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        h1 {
            color: #e94560;
            text-shadow: 0 0 10px #e94560;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin-bottom: 30px;
            /* éœ“è™¹å‘å…‰æ•ˆæœ */
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(233, 69, 96, 0.5), 0 0 40px rgba(15, 52, 96, 0.5);
        }

        canvas {
            border-radius: 50%;
            transform: rotate(-90deg); /* è®©0åº¦ä»æ­£ä¸Šæ–¹å¼€å§‹ */
        }

        /* æŒ‡é’ˆ */
        .arrow {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid #fff; /* ç™½è‰²æŒ‡é’ˆ */
            filter: drop-shadow(0 0 5px #fff);
            z-index: 10;
        }

        /* æŒ‰é’®æ ·å¼ */
        #actionBtn {
            background: linear-gradient(45deg, #e94560, #0f3460);
            border: none;
            color: white;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(233, 69, 96, 0.6);
            transition: transform 0.1s;
            font-weight: bold;
        }

        #actionBtn:active {
            transform: scale(0.95);
        }

        /* ç»“æœå¼¹çª— */
        #result {
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
            color: #ffd700;
            min-height: 30px;
            text-align: center;
        }
    </style>
</head>
<body>

    <h1>ğŸº æ·±å¤œæƒ…ç»ªè½¬ç›˜ ğŸº</h1>

    <div class="wheel-container">
        <div class="arrow"></div>
        <canvas id="wheelCanvas" width="300" height="300"></canvas>
    </div>

    <div id="result">å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿ</div>
    <button id="actionBtn" onclick="toggleSpin()">å¼€å§‹è½¬åŠ¨</button>

    <script>
        // --- åœ¨è¿™é‡Œä¿®æ”¹ä½ çš„æƒ©ç½šé¡¹ç›® ---
        const items = [
            "å–ä¸€æ¯", 
            "çœŸå¿ƒè¯", 
            "æŒ‡å®šäººå–", 
            "å¤§å†’é™©", 
            "å–åŠæ¯", 
            "å”±é¦–æ­Œ", 
            "å…æ­»é‡‘ç‰Œ", 
            "æ·±æ°´ç‚¸å¼¹"
        ];
        
        // é…è‰²æ–¹æ¡ˆ (äº¤æ›¿é¢œè‰²)
        const colors = ["#0f3460", "#16213e", "#0f3460", "#16213e", "#0f3460", "#16213e", "#0f3460", "#e94560"]; 
        
        const canvas = document.getElementById("wheelCanvas");
        const ctx = canvas.getContext("2d");
        const size = 300;
        const centerX = size / 2;
        const centerY = size / 2;
        const radius = size / 2;
        const step = (2 * Math.PI) / items.length; // æ¯ä¸€å—çš„å¼§åº¦

        let currentAngle = 0; // å½“å‰è§’åº¦
        let isSpinning = false;
        let spinSpeed = 0;
        let animationFrameId;

        // ç»˜åˆ¶è½¬ç›˜
        function drawWheel() {
            for (let i = 0; i < items.length; i++) {
                const angle = i * step;
                
                // ç»˜åˆ¶æ‰‡å½¢
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, angle, angle + step);
                ctx.fillStyle = colors[i % colors.length];
                ctx.fill();
                ctx.stroke();

                // ç»˜åˆ¶æ–‡å­—
                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(angle + step / 2);
                ctx.textAlign = "right";
                ctx.fillStyle = "#fff";
                ctx.font = "bold 14px Arial";
                ctx.fillText(items[i], radius - 20, 5);
                ctx.restore();
            }
        }

        // æ—‹è½¬åŠ¨ç”»é€»è¾‘
        function animate() {
            // æ—‹è½¬ç”»å¸ƒå†…å®¹ï¼ˆè§†è§‰ä¸Šçš„æ—‹è½¬ï¼‰
            // è¿™é‡Œæˆ‘ä»¬ä¸æ—‹è½¬ç”»å¸ƒï¼Œè€Œæ˜¯åªè®°å½•è§’åº¦ï¼Œä½†ä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬é‡æ–°ç»˜åˆ¶å¹¶åŠ ä¸Šæ—‹è½¬åç§»æœ‰ç‚¹å¤æ‚
            // æ›´ç®€å•çš„æ–¹æ³•æ˜¯ï¼šæ¯æ¬¡ç»˜åˆ¶æ—¶ä¿ç•™è½¬ç›˜ä¸åŠ¨ï¼Œé€šè¿‡CSSæ—‹è½¬ canvas å…ƒç´ 
            
            // è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ç®€å•é€»è¾‘ï¼šåªæ›´æ–°CSS transform
            canvas.style.transform = `rotate(${currentAngle - 90}deg)`; 

            if (isSpinning) {
                // å¦‚æœæ­£åœ¨è½¬ï¼Œä¿æŒé€Ÿåº¦
                spinSpeed = 20; // åŒ€é€Ÿè½¬åŠ¨
                currentAngle += spinSpeed;
            } else {
                // å¦‚æœåœæ­¢è¢«è§¦å‘ï¼Œå¼€å§‹å‡é€Ÿ
                if (spinSpeed > 0.1) {
                    spinSpeed *= 0.96; // æ‘©æ“¦ç³»æ•°ï¼Œè¶Šå°åœå¾—è¶Šå¿«
                    currentAngle += spinSpeed;
                } else {
                    spinSpeed = 0;
                    cancelAnimationFrame(animationFrameId);
                    showResult();
                    return;
                }
            }
            
            animationFrameId = requestAnimationFrame(animate);
        }

        // æŒ‰é’®ç‚¹å‡»é€»è¾‘
        function toggleSpin() {
            const btn = document.getElementById("actionBtn");
            const resDiv = document.getElementById("result");

            if (!isSpinning && spinSpeed === 0) {
                // çŠ¶æ€ï¼šé™æ­¢ -> å¼€å§‹è½¬åŠ¨
                isSpinning = true;
                btn.innerText = "åœæ­¢ï¼";
                btn.style.background = "linear-gradient(45deg, #e94560, #c0392b)";
                resDiv.innerText = "è½¬åŠ¨ä¸­...";
                animate();
            } else if (isSpinning) {
                // çŠ¶æ€ï¼šè½¬åŠ¨ä¸­ -> è§¦å‘å‡é€Ÿåœæ­¢
                isSpinning = false; // è¿™ä¼šè§¦å‘ animate ä¸­çš„ else åˆ†æ”¯ï¼ˆå‡é€Ÿï¼‰
                btn.innerText = "æ­£åœ¨åœæ­¢...";
                btn.disabled = true; // é˜²æ­¢é‡å¤ç‚¹å‡»
            }
        }

        // è®¡ç®—ç»“æœ
        function showResult() {
            const btn = document.getElementById("actionBtn");
            btn.innerText = "å¼€å§‹è½¬åŠ¨";
            btn.disabled = false;
            btn.style.background = "linear-gradient(45deg, #e94560, #0f3460)";

            // è®¡ç®—æŒ‡é’ˆæŒ‡å‘äº†å“ªä¸€å—
            // è¿™é‡Œçš„æ•°å­¦é€»è¾‘ï¼š
            // æŒ‡é’ˆåœ¨æ­£ä¸Šæ–¹(270åº¦æˆ–-90åº¦ä½ç½®)ã€‚ç”±äºcanvasæ—‹è½¬äº†ï¼Œæˆ‘ä»¬éœ€è¦åæ¨ã€‚
            // ç®€å•ç®—æ³•ï¼š360 - (å½“å‰è§’åº¦ % 360) å¾—åˆ°ç›¸å¯¹äº0ç‚¹çš„åç§»
            
            let normalizedAngle = currentAngle % 360;
            // å› ä¸ºCSSåˆå§‹æ—‹è½¬äº†-90åº¦ï¼Œæ‰€ä»¥å®é™…æŒ‡é’ˆä½ç½®å¯¹åº”çš„æ˜¯
            let degreesPerSlice = 360 / items.length;
            
            // ä¿®æ­£è§’åº¦è®¡ç®—ï¼Œç®—å‡ºæŒ‡é’ˆè½åœ¨å“ªä¸€å—
            // æŒ‡é’ˆå›ºå®šåœ¨é¡¶éƒ¨ï¼Œç›¸å½“äºè½¬ç›˜è½¬äº† normalizedAngle åº¦
            // ä¹Ÿå°±æ˜¯ç¬¬ 0 å—åˆ’è¿‡äº† normalizedAngle åº¦
            // æˆ‘ä»¬éœ€è¦è®¡ç®—å“ªä¸ªç´¢å¼•å¤„äº 360 - normalizedAngle çš„ä½ç½®
            
            let index = Math.floor((360 - normalizedAngle + 90) % 360 / degreesPerSlice); 
            // +90 æ˜¯ä¸ºäº†ä¿®æ­£åˆå§‹CSSæ—‹è½¬

            // é˜²æ­¢è®¡ç®—å‡º undefined æˆ– è¶Šç•Œ
            index = (index + items.length) % items.length; // ç¡®ä¿æ˜¯æ­£æ•´æ•°

            const resultText = items[index];
            document.getElementById("result").innerText = "ğŸ‰ ç»“æœï¼š " + resultText + " ğŸ‰";
        }

        // åˆå§‹åŒ–
        drawWheel();

    </script>
</body>
</html>